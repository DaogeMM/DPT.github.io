(()=>{"use strict";var e={464(e,t,r){var a=r(751),s=r(641),o=r(953),n=r(29);const l={__name:"App",setup(e){return(e,t)=>((0,s.uX)(),(0,s.Wv)((0,o.R1)(n.Tp)))}},c=l,u=c,i={class:"top-nav"},d={class:"nav-left"},p={class:"page-container"},v={__name:"Layout",setup(e){return(e,t)=>((0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",i,[(0,s.Lk)("div",d,[(0,s.Lk)("div",{class:"nav-item",onClick:t[0]||(t[0]=t=>e.$router.push({name:"start"}))}," 主页 "),(0,s.Lk)("div",{class:"nav-item",onClick:t[1]||(t[1]=t=>e.$router.push({name:"table"}))}," 定数表 ")])]),(0,s.Lk)("div",p,[(0,s.bF)((0,o.R1)(n.Tp))])],64))}};var h=r(262);const f=(0,h.A)(v,[["__scopeId","data-v-54d440ba"]]),m=f,b={class:"start-page"},g={class:"btn-group"};function y(e,t){return(0,s.uX)(),(0,s.CE)("div",b,[t[1]||(t[1]=(0,s.Lk)("div",{class:"title-group"},[(0,s.Lk)("h1",{class:"page-title"},"DP-Tool"),(0,s.Lk)("p",{class:"page-subtitle"}," 您的 Phigros 助手 ")],-1)),(0,s.Lk)("div",g,[(0,s.Lk)("button",{class:"start-btn",onClick:t[0]||(t[0]=t=>e.$router.push({name:"table"}))}," 查看定数表 ")])])}const k={},_=(0,h.A)(k,[["render",y],["__scopeId","data-v-567f3d92"]]),L=_;var C=r(33);const E={class:"group-title"},I={__name:"levelGUI",props:{cardList:{type:Object,required:!0},columns:{type:Number,required:!0},gap:{type:Number,default:16},gridWidth:{type:[Number,String],default:1500},lazyThreshold:{type:Number,default:0}},setup(e){const t=e,r=(0,o.KR)(null),a=(0,s.EW)(()=>({width:"number"===typeof t.gridWidth?`${t.gridWidth}px`:t.gridWidth,margin:"0 auto",boxSizing:"border-box"})),n=()=>({"--column-count":t.columns,"--gap-size":`${t.gap}px`,"--column-width":"calc((100% - (var(--column-count) - 1) * var(--gap-size)) / var(--column-count))"}),l=(0,s.EW)(()=>{const e=Object.entries(t.cardList),r=e.sort((e,t)=>{const r=Number(e[0]),a=Number(t[0]);return a-r});return r.map(([e,t])=>({key:e,value:t}))}),c=()=>window.IntersectionObserver?(r.value=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const t=e.target;t.dataset.loaded="true","IMG"===t.tagName&&t.dataset.src&&(t.src=t.dataset.src,t.removeAttribute("data-src")),r.value.unobserve(t)}})},{rootMargin:"0px",threshold:t.lazyThreshold}),e=>{e&&!e.dataset.loaded&&r.value.observe(e)}):e=>{e.dataset.loaded="true","IMG"===e.tagName&&(e.src=e.dataset.src)},u=c();return(0,s.hi)(()=>{r.value&&(r.value.disconnect(),r.value=null)}),(e,t)=>((0,s.uX)(),(0,s.CE)("div",{class:"card-container",style:(0,C.Tr)(a.value)},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.value,({key:t,value:r},a)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"card-group"},[(0,s.Lk)("div",E,(0,C.v_)(Number(t).toFixed(1)),1),(0,s.Lk)("div",{class:"card-grid",style:(0,C.Tr)(n())},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r,(r,a)=>(0,s.RG)(e.$slots,"default",{key:a,cardData:r,index:a,groupKey:t,loadImage:(0,o.R1)(u)})),128))],4)]))),128))],4))}},O=(0,h.A)(I,[["__scopeId","data-v-6bef9e5b"]]),w=O,T={class:"chart-card"},X={class:"card-cover"},A=["src","alt"],j={class:"card-info"},x={__name:"levelCard",props:{chartInfo:{type:Array,required:!0}},setup(e){return(t,r)=>((0,s.uX)(),(0,s.CE)("div",T,[(0,s.Lk)("div",X,[(0,s.Lk)("img",{src:e.chartInfo[2],alt:e.chartInfo[0],class:"cover-img"},null,8,A)]),(0,s.Lk)("div",j,[(0,s.Lk)("div",{class:"difficulty-tag",style:(0,C.Tr)({backgroundColor:e.chartInfo[4]||"#cccccc"})},(0,C.v_)(e.chartInfo[3]),5)])]))}},F=(0,h.A)(x,[["__scopeId","data-v-5e93d9f8"]]),N=F;function $(e,t,r,a,o,n){return(0,s.uX)(),(0,s.CE)("div")}var S=r(335);const W={name:"LevelGet",methods:{async getLevel(){const e="",t=`${e}/assets`,r=`${e}/files`,a=`${r}/infos/difficulty.tsv`,s={EZ:"#0D9A28",HD:"#0175B8",IN:"#CF1313",AT:"#383838",Legacy:"#383838",SP:"#383838"};try{const e=await S.A.get(a),r=e.data,o=r.split("\n").filter(e=>e.trim()),n=[];for(const t of o){const e=t.split("\t").map(e=>e.trim());e&&0!==e.length&&(e[0]&&!e[0].endsWith(".0")||(n.push([e[0],e[1],"EZ"]),e.length>2&&(n.push([e[0],e[2],"HD"]),n.push([e[0],e[3],"IN"])),e.length>4&&parseFloat(e[4])>0&&n.push([e[0],e[4],"AT"])))}const l=t;for(const t of n)t[1]=Math.round(10*parseFloat(t[1]))/10,t.push(t[2]),t.push(s[t[2]]),t[2]=`${l}/illLow/${t[0]}.png`;const c={};for(const t of n){const e=t[1];c[e]||(c[e]=[]),c[e].push(t)}const u={};for(const[t,a]of Object.entries(c)){const e=a.sort((e,t)=>e[0].localeCompare(t[0]));u[t]=e}return u}catch(o){return console.error("获取关卡数据失败：",o),console.error("实际请求的TSV文件路径：",a),{}}}}},K=(0,h.A)(W,[["render",$]]),R=K,M={class:"table-container"},P={key:0,class:"empty-tip"},D={key:1,class:"empty-tip error"},z={key:2,class:"level-list"},G={key:3,class:"empty-tip"},q={__name:"tableWeb",setup(e){const t=(0,o.KR)(null),r=(0,o.KR)(!0),a=(0,o.KR)("");return(0,s.sV)(async()=>{try{const e=await R.methods.getLevel();t.value=e,a.value=""}catch(e){console.error("定数表加载失败：",e),a.value="定数表加载失败，请刷新重试"}finally{r.value=!1}}),(e,o)=>((0,s.uX)(),(0,s.CE)("div",M,[r.value?((0,s.uX)(),(0,s.CE)("div",P," 正在加载定数表 ")):a.value?((0,s.uX)(),(0,s.CE)("div",D,(0,C.v_)(a.value),1)):t.value?((0,s.uX)(),(0,s.CE)("div",z,[(0,s.bF)(w,{"card-list":t.value,columns:5,gap:20},{default:(0,s.k6)(({cardData:e})=>[(0,s.bF)(N,{"chart-info":e},null,8,["chart-info"])]),_:1},8,["card-list"])])):((0,s.uX)(),(0,s.CE)("div",G," 暂无定数表数据 "))]))}},B=(0,h.A)(q,[["__scopeId","data-v-211d43c6"]]),H=B,V=[{path:"/",component:m,children:[{path:"",name:"start",component:L},{path:"table",name:"table",component:H}]},{path:"/:pathMatch(.*)*",redirect:{name:"start"}}],Z=(0,n.aE)({history:(0,n.Bt)(),routes:V,scrollBehavior(){return{top:0}}}),U=Z;(0,a.Ef)(u).use(U).mount("#app")}},t={};function r(a){var s=t[a];if(void 0!==s)return s.exports;var o=t[a]={exports:{}};return e[a](o,o.exports,r),o.exports}r.m=e,(()=>{var e=[];r.O=(t,a,s,o)=>{if(!a){var n=1/0;for(i=0;i<e.length;i++){for(var[a,s,o]=e[i],l=!0,c=0;c<a.length;c++)(!1&o||n>=o)&&Object.keys(r.O).every(e=>r.O[e](a[c]))?a.splice(c--,1):(l=!1,o<n&&(n=o));if(l){e.splice(i--,1);var u=s();void 0!==u&&(t=u)}}return t}o=o||0;for(var i=e.length;i>0&&e[i-1][2]>o;i--)e[i]=e[i-1];e[i]=[a,s,o]}})(),(()=>{r.d=(e,t)=>{for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}})(),(()=>{r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{var e={524:0};r.O.j=t=>0===e[t];var t=(t,a)=>{var s,o,[n,l,c]=a,u=0;if(n.some(t=>0!==e[t])){for(s in l)r.o(l,s)&&(r.m[s]=l[s]);if(c)var i=c(r)}for(t&&t(a);u<n.length;u++)o=n[u],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(i)},a=self["webpackChunkpcs"]=self["webpackChunkpcs"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var a=r.O(void 0,[504],()=>r(464));a=r.O(a)})();
//# sourceMappingURL=app.e02ca98c.js.map