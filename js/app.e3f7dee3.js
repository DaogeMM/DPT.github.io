(()=>{"use strict";var e={497(e,t,a){var l=a(751),s=a(641),r=a(953),n=a(29);const c={__name:"App",setup(e){return(e,t)=>((0,s.uX)(),(0,s.Wv)((0,r.R1)(n.Tp)))}},o=c,i=o,u={class:"app-container"},d={class:"top-nav"},v={class:"nav-left"},p={class:"nav-right"},m={class:"page-container"},f={__name:"Layout",setup(e){const t=e=>{window.open(e,"_blank")};return(e,a)=>((0,s.uX)(),(0,s.CE)("div",u,[(0,s.Lk)("div",d,[(0,s.Lk)("div",v,[(0,s.Lk)("div",{class:"nav-item",onClick:a[0]||(a[0]=t=>e.$router.push({name:"start"}))}," 主页 "),(0,s.Lk)("div",{class:"nav-item",onClick:a[1]||(a[1]=t=>e.$router.push({name:"singleMain"}))}," 单曲 "),(0,s.Lk)("div",{class:"nav-item",onClick:a[2]||(a[2]=t=>e.$router.push({name:"tableMain"}))}," 列表 ")]),(0,s.Lk)("div",p,[(0,s.Lk)("div",{class:"nav-right-text",onClick:a[3]||(a[3]=e=>t("https://space.bilibili.com/521730845"))},"个人主页"),(0,s.Lk)("div",{class:"nav-right-text",onClick:a[4]||(a[4]=e=>t("https://space.bilibili.com/414149787"))},"官方账号")])]),(0,s.Lk)("div",m,[(0,s.bF)((0,r.R1)(n.Tp))])]))}};var b=a(262);const y=(0,b.A)(f,[["__scopeId","data-v-f2eb85f6"]]),h=y,g={class:"start-page"};function k(e,t){return(0,s.uX)(),(0,s.CE)("div",g,[...t[0]||(t[0]=[(0,s.Lk)("div",{class:"title-group"},[(0,s.Lk)("h1",{class:"page-title"},"DP-Tool"),(0,s.Lk)("p",{class:"page-subtitle"}," 您的 Phigros 助手 ")],-1)])])}const L={},_=(0,b.A)(L,[["render",k],["__scopeId","data-v-7ff5f58b"]]),E=_,C={class:"table-main-container"},I={class:"table-card-list"},X={__name:"tableMain",setup(e){const t=(0,n.rd)(),a=e=>{t.push({name:e})};return(e,t)=>((0,s.uX)(),(0,s.CE)("div",C,[(0,s.Lk)("div",I,[(0,s.Lk)("div",{class:"table-card",onClick:t[0]||(t[0]=e=>a("tableLevel"))},[...t[4]||(t[4]=[(0,s.Lk)("div",{class:"table-card-title"},"定数表",-1)])]),(0,s.Lk)("div",{class:"table-card",onClick:t[1]||(t[1]=e=>a("tableBPM"))},[...t[5]||(t[5]=[(0,s.Lk)("div",{class:"table-card-title"},"BPM表",-1)])]),(0,s.Lk)("div",{class:"table-card",onClick:t[2]||(t[2]=e=>a("tableB30"))},[...t[6]||(t[6]=[(0,s.Lk)("div",{class:"table-card-title"},"B30表",-1)])]),(0,s.Lk)("div",{class:"table-card",onClick:t[3]||(t[3]=e=>a("tableInfo"))},[...t[7]||(t[7]=[(0,s.Lk)("div",{class:"table-card-title"},"信息表",-1)])])])]))}},w=(0,b.A)(X,[["__scopeId","data-v-59c88da7"]]),A=w;var N=a(33);const $={class:"group-title"},B={__name:"levelGUI",props:{cardList:{type:Object,required:!0},columns:{type:Number,required:!0},gap:{type:Number,default:16},gridWidth:{type:[Number,String],default:"100%"}},setup(e){const t=e,a=(0,s.EW)(()=>({width:"number"===typeof t.gridWidth?`${t.gridWidth}px`:t.gridWidth,margin:"0 auto",boxSizing:"border-box"})),l=()=>({"--column-count":t.columns,"--gap-size":`${t.gap}px`,"--column-width":"calc((100% - (var(--column-count) - 1) * var(--gap-size)) / var(--column-count))"}),r=(0,s.EW)(()=>{const e=Object.entries(t.cardList),a=e.sort((e,t)=>{const a=Number(e[0]),l=Number(t[0]);return l-a});return a.map(([e,t])=>({key:e,value:t}))});return(e,t)=>((0,s.uX)(),(0,s.CE)("div",{class:"card-container",style:(0,N.Tr)(a.value)},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.value,({key:t,value:a},r)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"card-group"},[(0,s.Lk)("div",$,(0,N.v_)(Number(t).toFixed(1)),1),(0,s.Lk)("div",{class:"card-grid",style:(0,N.Tr)(l())},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a,(a,l)=>(0,s.RG)(e.$slots,"default",{key:l,cardData:a,index:l,groupKey:t})),128))],4)]))),128))],4))}},O=(0,b.A)(B,[["__scopeId","data-v-ee56aaea"]]),K=O,D={class:"chart-card"},j={class:"card-cover"},S=["src","alt"],T={class:"card-info"},W={__name:"levelCard",props:{chartInfo:{type:Array,required:!0}},setup(e){return(t,a)=>((0,s.uX)(),(0,s.CE)("div",D,[(0,s.Lk)("div",j,[(0,s.Lk)("img",{src:e.chartInfo[2],alt:e.chartInfo[2],class:"cover-img"},null,8,S)]),(0,s.Lk)("div",T,[(0,s.Lk)("div",{class:"difficulty-tag",style:(0,N.Tr)({backgroundColor:e.chartInfo[4]||"#cccccc"})},(0,N.v_)(e.chartInfo[3]),5)])]))}},x=(0,b.A)(W,[["__scopeId","data-v-1a62dc28"]]),R=x;var F=a(335);const M={name:"LevelGet",methods:{async getLevel(){const e="",t=`${e}/files`,a=`${t}/infos/infos.json`,l={EZ:"#0D9A28",HD:"#0175B8",IN:"#CF1313",AT:"#383838",SP:"#383838",LY:"#383838"},s=["EZ","HD","IN","AT"];try{const t=await F.A.get(a),r=t.data,n=[];for(const[e,a]of Object.entries(r))if(a.name&&a.display)for(const t of s)if(a[t]&&a[t].lvl&&""!==a[t].lvl.trim()){const l=parseFloat(a[t].lvl);isNaN(l)||n.push([e,l,t])}const c=`${e}/assets/illLow`;for(const e of n){e[1]=Math.round(10*e[1])/10;const t=e[2];e[2]=`${c}/${e[0]}.png`,e.push(t),e.push(l[t]||"#383838")}const o={};for(const e of n){const t=e[1];o[t]||(o[t]=[]),o[t].push(e)}const i={};for(const[e,a]of Object.entries(o)){const t=a.sort((e,t)=>e[0].localeCompare(t[0]));i[e]=t}return i}catch(r){return console.error("获取数据失败：",r),console.error("实际请求的JSON文件路径：",a),{}}}}},P=M,q=P,G={class:"table-container"},H={key:0,class:"empty-tip"},z={key:1,class:"empty-tip error"},Z={key:2,class:"level-list"},J={key:3,class:"empty-tip"},V={__name:"tableLevel",setup(e){const t=(0,r.KR)(null),a=(0,r.KR)(!0),l=(0,r.KR)("");return(0,s.sV)(async()=>{try{const e=await q.methods.getLevel();t.value=e,l.value=""}catch(e){console.error("定数表加载失败：",e),l.value="定数表加载失败，请刷新重试"}finally{a.value=!1}}),(e,r)=>((0,s.uX)(),(0,s.CE)("div",G,[a.value?((0,s.uX)(),(0,s.CE)("div",H," 正在加载定数表 ")):l.value?((0,s.uX)(),(0,s.CE)("div",z,(0,N.v_)(l.value),1)):t.value?((0,s.uX)(),(0,s.CE)("div",Z,[(0,s.bF)(K,{"card-list":t.value,columns:5,gap:20},{default:(0,s.k6)(({cardData:e})=>[(0,s.bF)(R,{"chart-info":e},null,8,["chart-info"])]),_:1},8,["card-list"])])):((0,s.uX)(),(0,s.CE)("div",J," 暂无定数表数据 "))]))}},U=(0,b.A)(V,[["__scopeId","data-v-25a46be3"]]),Q=U,Y={__name:"b30GUI",props:{cardList:{type:Array,required:!0},columns:{type:Number},gap:{type:Number},gridWidth:{type:[Number,String],default:"100%"}},setup(e){const t=e,a=(0,s.EW)(()=>({width:"number"===typeof t.gridWidth?`${t.gridWidth}px`:t.gridWidth,"--column-count":t.columns,"--gap-size":`${t.gap}px`,"--column-width":"calc((100% - (var(--column-count) - 1) * var(--gap-size)) / var(--column-count))"}));return(t,l)=>((0,s.uX)(),(0,s.CE)("div",{class:"card-grid",style:(0,N.Tr)(a.value)},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.cardList,(e,a)=>(0,s.RG)(t.$slots,"default",{key:a,cardData:e,index:a})),128))],4))}},ee=(0,b.A)(Y,[["__scopeId","data-v-8e64996c"]]),te=ee,ae={class:"top-right-text"},le={class:"card-cover"},se=["src","alt"],re={class:"card-info"},ne={class:"chart-name"},ce={__name:"b30Card",props:{chartInfo:{type:Array,required:!0}},setup(e){return(t,a)=>((0,s.uX)(),(0,s.CE)("div",{class:(0,N.C4)(["chart-card",{"glow-border":e.chartInfo[7]}])},[(0,s.Lk)("div",ae,(0,N.v_)(e.chartInfo[6]),1),(0,s.Lk)("div",le,[(0,s.Lk)("img",{src:e.chartInfo[2],alt:e.chartInfo[2],class:"cover-img"},null,8,se)]),(0,s.Lk)("div",re,[(0,s.Lk)("h3",ne,(0,N.v_)(e.chartInfo[3]),1),(0,s.Lk)("div",{class:"difficulty-tag",style:(0,N.Tr)({backgroundColor:e.chartInfo[5]||"#cccccc"})},(0,N.v_)(e.chartInfo[4]+" Lv."+e.chartInfo[1]),5)]),a[0]||(a[0]=(0,s.Fv)('<div class="bottom-left-info" data-v-1d0765d3><img src="/assets/rank/Phi.png" class="info-icon" data-v-1d0765d3><div class="info-text-wrapper" data-v-1d0765d3><div class="main-text" data-v-1d0765d3> 1000000 </div><div class="sub-text" data-v-1d0765d3> 100.00% </div></div></div>',1))],2))}},oe=(0,b.A)(ce,[["__scopeId","data-v-1d0765d3"]]),ie=oe,ue={name:"b30Get",methods:{async getB30(){const e="",t=`${e}/files`,a=`${t}/infos/infos.json`,l={EZ:"#0D9A28",HD:"#0175B8",IN:"#CF1313",AT:"#383838"},s=["IN","AT"];try{const t=await F.A.get(a),r=t.data,n=[];for(const[e,a]of Object.entries(r))if(a.name&&a.display)for(const t of s)if(a[t]&&a[t].lvl&&""!==a[t].lvl.trim()){const l=parseFloat(a[t].lvl),s=a.name;isNaN(l)||n.push([e,l,t,s])}n.sort((e,t)=>t[1]-e[1]);for(const a of n){a[1]=Math.round(10*a[1])/10;const t=a[2];a[2]=`${e}/assets/illLow/${a[0]}.png`,a.push(t),a.push(l[t]||"#383838")}const c=n.slice(0,3).map(e=>[...e]);for(let e=0;e<n.length;e++){const t=e+1;t<=27&&(n[e].push(`[B${t}]`),n[e].push(!1))}for(let e=0;e<c.length;e++){const t=e+1;c[e].push(`[P${t}]`),c[e].push(!0)}const o=[...c,...n].slice(0,30),i=o.map(e=>e[1]),u=i.reduce((e,t)=>e+t,0)/30,d=u.toFixed(2),v=u.toFixed(8);return[o,[d,v]]}catch(r){return console.error("获取数据失败：",r),console.error("实际请求的JSON文件路径：",a),{}}}}},de=ue,ve=de,pe={class:"table-container"},me={key:0,class:"empty-tip"},fe={key:1,class:"empty-tip error"},be={key:2,class:"b30-list"},ye={class:"fixed-left-text"},he={key:3,class:"empty-tip"},ge={__name:"tableB30",setup(e){const t=(0,r.KR)(null),a=(0,r.KR)(!0),l=(0,r.KR)(""),n=(0,r.KR)([]);return(0,s.sV)(async()=>{try{const[e,a]=await ve.methods.getB30();t.value=e,n.value=a,l.value=""}catch(e){console.error("B30加载失败：",e),l.value="B30加载失败，请刷新重试"}finally{a.value=!1}}),(e,r)=>((0,s.uX)(),(0,s.CE)("div",pe,[a.value?((0,s.uX)(),(0,s.CE)("div",me," 正在加载B30表 ")):l.value?((0,s.uX)(),(0,s.CE)("div",fe,(0,N.v_)(l.value),1)):t.value?((0,s.uX)(),(0,s.CE)("div",be,[(0,s.bF)(te,{"card-list":t.value,columns:3,gap:20},{default:(0,s.k6)(({cardData:e})=>[(0,s.bF)(ie,{"chart-info":e},null,8,["chart-info"])]),_:1},8,["card-list"]),(0,s.Lk)("div",ye," RKS "+(0,N.v_)(n.value[0])+" ("+(0,N.v_)(n.value[1])+") ",1)])):((0,s.uX)(),(0,s.CE)("div",he," 暂无B30表数据 "))]))}},ke=(0,b.A)(ge,[["__scopeId","data-v-66750674"]]),Le=ke,_e={class:"group-title"},Ee={class:"content-wrapper"},Ce={class:"sub-bpm-label"},Ie={__name:"bpmGUI",props:{cardList:{type:Array,required:!0},columns:{type:Number,required:!0},gap:{type:Number,default:16},gridWidth:{type:[Number,String],default:"100%"}},setup(e){const t=e,a=(0,s.EW)(()=>({width:"number"===typeof t.gridWidth?`${t.gridWidth}px`:t.gridWidth,margin:"0 auto",boxSizing:"border-box"})),l=()=>({"--column-count":t.columns,"--gap-size":`${t.gap}px`,"--column-width":"calc((100% - (var(--column-count) - 1) * var(--gap-size)) / var(--column-count))"}),r=(0,s.EW)(()=>{const e=[...t.cardList].sort((e,t)=>{const a=Number(e.mainBpm),l=Number(t.mainBpm);return l-a});return e.map(e=>({...e,subBpmList:[...e.subBpmList].sort((e,t)=>{const a=Number(e.subBpm.replace("x","")),l=Number(t.subBpm.replace("x",""));return a-l})}))});return(e,t)=>((0,s.uX)(),(0,s.CE)("div",{class:"card-container",style:(0,N.Tr)(a.value)},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.value,(t,a)=>((0,s.uX)(),(0,s.CE)("div",{key:a,class:"card-group"},[(0,s.Lk)("div",_e,(0,N.v_)(Number(t.mainBpm)),1),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.subBpmList,(a,r)=>((0,s.uX)(),(0,s.CE)("div",{key:r,class:"sub-bpm-row"},[(0,s.Lk)("div",Ee,[(0,s.Lk)("div",Ce,(0,N.v_)(a.subBpm),1),(0,s.Lk)("div",{class:"card-grid",style:(0,N.Tr)(l())},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.contentList,(l,r)=>(0,s.RG)(e.$slots,"default",{key:r,cardData:l,index:r,mainBpm:t.mainBpm,subBpm:a.subBpm})),128))],4)])]))),128))]))),128))],4))}},Xe=(0,b.A)(Ie,[["__scopeId","data-v-09c94fe4"]]),we=Xe,Ae={class:"chart-card"},Ne={class:"card-cover"},$e=["src","alt"],Be={__name:"bpmCard",props:{chartInfo:{type:String,required:!0}},setup(e){return(t,a)=>((0,s.uX)(),(0,s.CE)("div",Ae,[(0,s.Lk)("div",Ne,[(0,s.Lk)("img",{src:e.chartInfo,alt:e.chartInfo,class:"cover-img"},null,8,$e)])]))}},Oe=(0,b.A)(Be,[["__scopeId","data-v-055c26c4"]]),Ke=Oe,De={name:"bpmGet",methods:{transformSongPaths(e,t){if(Array.isArray(e))return e.map(e=>this.transformSongPaths(e,t));if("object"===typeof e&&null!==e){const a={};for(const l in e)a[l]=this.transformSongPaths(e[l],t);return a}return"string"===typeof e?`${t}/assets/illLow/${e}.png`:e},async getBPM(){const e="",t=`${e}/files`,a=`${t}/infos/bpm.json`;try{const t=await F.A.get(a),l=t.data,s=this.transformSongPaths(l,e);return s}catch(l){return console.error("获取数据失败：",l),console.error("实际请求的JSON文件路径：",a),{}}}}},je=De,Se=je,Te={class:"table-container"},We={key:0,class:"empty-tip"},xe={key:1,class:"empty-tip error"},Re={key:2,class:"bpm-list"},Fe={key:3,class:"empty-tip"},Me={__name:"tableBPM",setup(e){const t=(0,r.KR)([]),a=(0,r.KR)(!0),l=(0,r.KR)(""),n=e=>Array.isArray(e)?e.map(e=>{const[t,a]=e,l=Object.entries(a).map(([e,t])=>({subBpm:e,contentList:t}));return{mainBpm:Number(t),subBpmList:l}}):[];return(0,s.sV)(async()=>{try{const e=await Se.methods.getBPM();t.value=n(e),l.value=""}catch(e){console.error("BPM表加载失败：",e),l.value="BPM表加载失败，请刷新重试"}finally{a.value=!1}}),(e,r)=>((0,s.uX)(),(0,s.CE)("div",Te,[a.value?((0,s.uX)(),(0,s.CE)("div",We," 正在加载BPM表 ")):l.value?((0,s.uX)(),(0,s.CE)("div",xe,(0,N.v_)(l.value),1)):t.value.length>0?((0,s.uX)(),(0,s.CE)("div",Re,[(0,s.bF)(we,{"card-list":t.value,columns:5,gap:20},{default:(0,s.k6)(({cardData:e})=>[(0,s.bF)(Ke,{"chart-info":e},null,8,["chart-info"])]),_:1},8,["card-list"])])):((0,s.uX)(),(0,s.CE)("div",Fe," 暂无BPM表数据 "))]))}},Pe=(0,b.A)(Me,[["__scopeId","data-v-5d5460ce"]]),qe=Pe,Ge={key:0,class:"table-title"},He={key:1,class:"empty-table-tip"},ze={class:"data-table"},Ze={__name:"infoGUI",props:{tableData:{type:Array,required:!0},tableWidth:{type:[Number,String],default:"100%"},cellGap:{type:Number,default:8},tableTitle:{type:String,default:""}},setup(e){const t=e,a=(0,r.KR)(null),l=(0,r.KR)(!1),n=(0,r.KR)(0),c=(0,r.KR)(0),o=(0,s.EW)(()=>{if(!Array.isArray(t.tableData)||0===t.tableData.length)return console.warn("tableData 为空数组"),!1;const e=t.tableData[0];if("object"!==typeof e||null===e||Array.isArray(e))return console.warn("tableData 第0项不是有效字典（对象）"),!1;if(!Object.keys(e).includes("更新"))return console.warn('tableData 表头中未找到"更新"列'),!1;const a=t.tableData.slice(1);if(0===a.length)return console.warn("tableData 无表体数据（仅表头）"),!1;const l=a[0];return"object"===typeof l&&null!==l&&!Array.isArray(l)||(console.warn("tableData 表体数据不是有效字典（对象）"),!1)}),i=(0,s.EW)(()=>o.value?t.tableData[0]:{}),u=e=>{if(!e||"string"!==typeof e)return new Date(0);const t=new Date(e);return isNaN(t.getTime())?new Date(0):t},d=(0,s.EW)(()=>{if(!o.value)return[];const e=JSON.parse(JSON.stringify(t.tableData.slice(1)));return e.sort((e,t)=>{const a=u(e["更新"]),l=u(t["更新"]);return a.getTime()-l.getTime()}),e}),v=(0,s.EW)(()=>"暂无表格数据"),p=(0,s.EW)(()=>({width:"number"===typeof t.tableWidth?`${t.tableWidth}px`:t.tableWidth,"--cell-gap":`${t.cellGap}px`,margin:"0 auto"})),m=e=>{a.value&&(l.value=!0,n.value=e.clientX,c.value=a.value.scrollLeft,e.preventDefault())},f=e=>{if(!l.value||!a.value)return;const t=e.clientX-n.value;a.value.scrollLeft=c.value-t},b=()=>{l.value=!1},y=()=>{l.value=!1};return(t,r)=>((0,s.uX)(),(0,s.CE)("div",{class:"table-container",style:(0,N.Tr)(p.value)},[e.tableTitle?((0,s.uX)(),(0,s.CE)("div",Ge,(0,N.v_)(e.tableTitle),1)):(0,s.Q3)("",!0),o.value?((0,s.uX)(),(0,s.CE)("div",{key:2,ref_key:"tableWrapperRef",ref:a,class:"table-wrapper",onMousedown:m,onMouseleave:y,onMouseup:b,onMousemove:f,style:(0,N.Tr)({cursor:l.value?"grabbing":"grab"})},[(0,s.Lk)("table",ze,[(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.value,(e,t,a)=>((0,s.uX)(),(0,s.CE)("th",{key:`header-${a}`,class:"table-th"},(0,N.v_)(t),1))),128))])]),(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(d.value,(e,t)=>((0,s.uX)(),(0,s.CE)("tr",{key:`row-${t}`,class:(0,N.C4)({"even-row":t%2===0})},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(Object.values(e),(e,t)=>((0,s.uX)(),(0,s.CE)("td",{key:`cell-${t}`},(0,N.v_)(e),1))),128))],2))),128))])])],36)):((0,s.uX)(),(0,s.CE)("div",He,(0,N.v_)(v.value),1))],4))}},Je=(0,b.A)(Ze,[["__scopeId","data-v-6953ef7c"]]),Ve=Je,Ue={name:"infoGet",methods:{async getInfo(e={}){const t="",a=`${t}/files`,l=`${a}/infos/infos.json`;try{const t=await F.A.get(l),a=t.data,s={};Object.entries(e).forEach(([e,t])=>{s[e]=t});const r=[];for(const[l,n]of Object.entries(a)){if(!n.name||!n.display)continue;const t={};Object.entries(e).forEach(([e,a])=>{const l=a.split(":");let s="";if(1===l.length)s=n[l[0]]??"";else{const[e,t]=l;s=n[e]?.[t]??""}t[e]=s}),Object.keys(t).length>0&&r.push(t)}return[s,...r]}catch(s){console.error("获取数据失败：",s),console.error("实际请求的JSON文件路径：",l);const t={};return Object.entries(e).forEach(([e,a])=>{t[e]=a}),[t]}}}},Qe=Ue,Ye=Qe,et={class:"table-container"},tt={key:0,class:"empty-tip"},at={key:1,class:"empty-tip error"},lt={key:2,class:"info-list"},st={key:3,class:"empty-tip"},rt={__name:"tableInfo",setup(e){const t=(0,r.KR)(null),a=(0,r.KR)(!0),l=(0,r.KR)(""),n={曲名:"name",曲师:"composer",画师:"illustrator",更新:"date",章节:"chapter",版本:"version",BPM:"BPM",时长:"duration",EZ定数:"EZ:lvl",EZ物量:"EZ:notecount",EZ谱师名义:"EZ:tcharter",HD定数:"HD:lvl",HD物量:"HD:notecount",HD谱师名义:"HD:charter",IN定数:"IN:lvl",IN物量:"IN:notecount",IN谱师名义:"IN:charter",AT定数:"AT:lvl",AT物量:"AT:notecount",AT谱师名义:"AT:charter"};return(0,s.sV)(async()=>{try{const e=await Ye.methods.getInfo(n);t.value=e,l.value=""}catch(e){console.error("信息表加载失败：",e),l.value="信息表加载失败，请刷新重试",t.value=[]}finally{a.value=!1}}),(e,r)=>((0,s.uX)(),(0,s.CE)("div",et,[a.value?((0,s.uX)(),(0,s.CE)("div",tt," 正在加载信息表 ")):l.value?((0,s.uX)(),(0,s.CE)("div",at,(0,N.v_)(l.value),1)):t.value&&t.value.length>1?((0,s.uX)(),(0,s.CE)("div",lt,[(0,s.bF)(Ve,{"table-data":t.value,"table-width":1500,"cell-gap":10,"border-color":"#d1d5db"},null,8,["table-data"])])):((0,s.uX)(),(0,s.CE)("div",st," 暂无信息表数据 "))]))}},nt=(0,b.A)(rt,[["__scopeId","data-v-74ac1f31"]]),ct=nt,ot={class:"group-title"},it={__name:"singleGUI",props:{cardList:{type:Object,required:!0},columns:{type:Number,required:!0},gap:{type:Number,default:16},gridWidth:{type:[Number,String],default:"100%"}},setup(e){const t=e,a=(0,s.EW)(()=>({width:"number"===typeof t.gridWidth?`${t.gridWidth}px`:t.gridWidth,margin:"0 auto",boxSizing:"border-box"})),l=()=>({"--column-count":t.columns,"--gap-size":`${t.gap}px`,"--column-width":"calc((100% - (var(--column-count) - 1) * var(--gap-size)) / var(--column-count))"}),r=(0,s.EW)(()=>{const e=Object.entries(t.cardList),a=e.sort((e,t)=>{const a=Number(e[0]),l=Number(t[0]);return l-a});return a.map(([e,t])=>({key:e,value:t}))});return(e,t)=>((0,s.uX)(),(0,s.CE)("div",{class:"card-container",style:(0,N.Tr)(a.value)},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.value,({key:t,value:a},r)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"card-group"},[(0,s.Lk)("div",ot,(0,N.v_)(t),1),(0,s.Lk)("div",{class:"card-grid",style:(0,N.Tr)(l())},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a,(a,l)=>(0,s.RG)(e.$slots,"default",{key:l,cardData:a,index:l,groupKey:t})),128))],4)]))),128))],4))}},ut=(0,b.A)(it,[["__scopeId","data-v-4c2f10bc"]]),dt=ut,vt={class:"chart-card"},pt={class:"card-cover"},mt=["src","alt"],ft={__name:"singleCard",props:{chartInfo:{type:Array,required:!0}},setup(e){return(t,a)=>((0,s.uX)(),(0,s.CE)("div",vt,[(0,s.Lk)("div",pt,[(0,s.Lk)("img",{src:e.chartInfo[2],alt:e.chartInfo[0],class:"cover-img"},null,8,mt)])]))}},bt=(0,b.A)(ft,[["__scopeId","data-v-fac153b2"]]),yt=bt,ht={name:"singleGet",methods:{async getSingle(){const e="",t=`${e}/files`,a=`${t}/infos/infos.json`,l=`${e}/assets/illLow`;try{const e=await F.A.get(a),t=e.data,s={},r="Other 其它曲目";for(const[a,n]of Object.entries(t)){if(!a||!n.name)continue;let e;n.display?(e=n.chapter,e||(e=r)):e=r,s[e]||(s[e]=[]),s[e].push([a,e,`${l}/${a}.png`])}return s}catch(s){return console.error("获取数据失败：",s),console.error("实际请求的JSON文件路径：",a),{}}}}},gt=ht,kt=gt,Lt={class:"music-detail-card"},_t={class:"top-info"},Et={class:"music-chapter"},Ct={class:"music-name"},It={class:"composer-chapter-wrap"},Xt={class:"music-composer"},wt={class:"image-container"},At=["src","alt"],Nt={key:0,class:"image-placeholder"},$t={class:"bottom-info"},Bt={class:"music-illustrator"},Ot={class:"other-info"},Kt={class:"info-grid"},Dt={class:"info-label"},jt={class:"info-value"},St={class:"difficulty-section"},Tt={class:"table-wrapper"},Wt={class:"difficulty-table"},xt={__name:"singlePage",props:{dict:{type:Object,required:!0,default:()=>({})}},setup(e){const t=[{label:"更新",key:"date"},{label:"版本",key:"version"},{label:"BPM",key:"BPM"},{label:"时长",key:"duration"},{label:"关联",key:"relation"},{label:"赛事",key:"competition"}],a=["EZ","HD","IN","AT","LY","SP"],l={EZ:"#0D9A28",HD:"#0175B8",IN:"#CF1313",AT:"#383838",SP:"#383838",LY:"#383838"},n=e,c=(0,r.KR)(""),o=(0,r.KR)(!1),i=(0,s.EW)(()=>n.dict?.illAssets&&"string"===typeof n.dict.illAssets?n.dict.illAssets:""),u=(0,s.EW)(()=>{const e={};return a.forEach(t=>{e[t]=n.dict[t]||{}}),e}),d=(0,s.EW)(()=>{const e=[];for(const t of a){const a=u.value[t]||{};v(a)||e.push({diffName:t,data:a})}return e}),v=e=>!e.tcharter&&!e.dif&&!e.lvl&&!e.notecount,p=()=>{c.value=i.value,o.value=!1};return(0,s.sV)(()=>{p()}),(a,r)=>((0,s.uX)(),(0,s.CE)("div",Lt,[(0,s.Lk)("div",_t,[(0,s.Lk)("p",Et,(0,N.v_)(e.dict.chapter||"-"),1),(0,s.Lk)("h2",Ct,(0,N.v_)(e.dict.name||"-"),1),(0,s.Lk)("div",It,[(0,s.Lk)("p",Xt,(0,N.v_)(e.dict.composer||"-"),1)])]),(0,s.Lk)("div",wt,[(0,s.Lk)("img",{src:c.value,alt:e.dict.name||"曲绘",class:"illustration-image",onError:r[0]||(r[0]=e=>o.value=!0)},null,40,At),o.value?((0,s.uX)(),(0,s.CE)("div",Nt," 暂无图片 ")):(0,s.Q3)("",!0)]),(0,s.Lk)("div",$t,[(0,s.Lk)("p",Bt,(0,N.v_)(e.dict.illustrator||"-"),1)]),(0,s.Lk)("div",Ot,[(0,s.Lk)("div",Kt,[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(t,(t,a)=>(0,s.Lk)("div",{key:a,class:"info-item"},[(0,s.Lk)("span",Dt,(0,N.v_)(t.label)+"：",1),(0,s.Lk)("span",jt,(0,N.v_)(e.dict[t.key]||"-"),1)])),64))])]),(0,s.Lk)("div",St,[(0,s.Lk)("div",Tt,[(0,s.Lk)("table",Wt,[r[1]||(r[1]=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"难度"),(0,s.Lk)("th",null,"定数"),(0,s.Lk)("th",null,"物量"),(0,s.Lk)("th",null,"谱师名义"),(0,s.Lk)("th",null,"谱师"),(0,s.Lk)("th",null,"Tap"),(0,s.Lk)("th",null,"Drag"),(0,s.Lk)("th",null,"Hold"),(0,s.Lk)("th",null,"Flick"),(0,s.Lk)("th",null,"Line")])],-1)),(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(d.value,(e,t)=>((0,s.uX)(),(0,s.CE)("tr",{key:t},[(0,s.Lk)("td",{class:"diff-name",style:(0,N.Tr)({backgroundColor:l[e.diffName]})},(0,N.v_)(e.diffName),5),(0,s.Lk)("td",null,(0,N.v_)(e.data.lvl||"-"),1),(0,s.Lk)("td",null,(0,N.v_)(e.data.notecount||"-"),1),(0,s.Lk)("td",null,(0,N.v_)(e.data.charter||"-"),1),(0,s.Lk)("td",null,(0,N.v_)(e.data.tcharter||"-"),1),(0,s.Lk)("td",null,(0,N.v_)(e.data.tap??"-"),1),(0,s.Lk)("td",null,(0,N.v_)(e.data.drag??"-"),1),(0,s.Lk)("td",null,(0,N.v_)(e.data.hold??"-"),1),(0,s.Lk)("td",null,(0,N.v_)(e.data.flick??"-"),1),(0,s.Lk)("td",null,(0,N.v_)(e.data.line??"-"),1)]))),128))])])])])]))}},Rt=(0,b.A)(xt,[["__scopeId","data-v-34be729e"]]),Ft=Rt,Mt={name:"singleListGet",methods:{async getSingleList(){const e="",t=`${e}/files`,a=`${t}/infos/infos.json`;try{const e=await F.A.get(a),t=e.data,l=Object.keys(t);return l}catch(l){return console.error("获取数据失败：",l),console.error("实际请求的JSON文件路径：",a),[]}}}},Pt=Mt,qt=Pt,Gt={name:"singleInfoGet",methods:{async getSingleInfo(e){const t="",a=`${t}/files`,l=`${a}/infos/infos.json`,s=`${t}/assets/illLow`;try{const t=await F.A.get(l),a=t.data;if(Object.prototype.hasOwnProperty.call(a,e)){const t=a[e],l="object"===typeof t&&null!==t?{...t,illAssets:`${s}/${e}.png`}:{value:t,illAssets:`${s}/${e}.png`};return l}return console.warn(`未找到键名为 "${e}" 的数据`),null}catch(r){return console.error("获取数据失败：",r),console.error("实际请求的JSON文件路径：",l),null}}}},Ht=Gt,zt=Ht,Zt={class:"table-container"},Jt={key:0,class:"empty-tip"},Vt={key:1,class:"empty-tip error"},Ut={key:2,class:"table-card-list"},Qt={key:1,class:"current-song-info"},Yt={key:0,class:"empty-tip"},ea={key:1,class:"empty-tip error"},ta={key:2},aa={key:3,class:"empty-tip"},la={key:3,class:"empty-tip"},sa={__name:"singleMain",setup(e){const t=(0,n.rd)(),a=(0,n.lq)(),l=(0,r.KR)([]),c=(0,r.KR)([]),o=(0,r.KR)({}),i=(0,r.KR)(""),u=(0,r.KR)(!0),d=(0,r.KR)(!1),v=(0,r.KR)(""),p=(0,r.KR)(""),m=e=>{t.push({name:"singleMain",params:{songName:e}})},f=e=>!(!e||!c.value.length)&&c.value.includes(e),b=async e=>{if(!e)return o.value={},void(p.value="");d.value=!0,p.value="";try{const t=await zt.methods.getSingleInfo(e);o.value=t||{}}catch(t){console.error("获取歌曲详情失败：",t),p.value="获取歌曲详情失败，请重试",o.value={}}finally{d.value=!1}},y=async()=>{const e=a.params.songName;e&&!f(e)?await t.push({name:"singleMain",params:{},query:a.query,replace:!0}):e&&(i.value=e,await b(e))};return(0,s.sV)(async()=>{try{u.value=!0;const[e,t]=await Promise.all([kt.methods.getSingle(),qt.methods.getSingleList()]);l.value=e||[],c.value=t||[],v.value="",await y()}catch(e){console.error("数据加载失败：",e),v.value="单曲列表加载失败，请刷新重试"}finally{u.value=!1}}),(0,s.wB)(()=>a.params.songName,async e=>{0!==c.value.length&&(e&&!f(e)?(await t.push({name:"singleMain",params:{},query:a.query,replace:!0}),o.value={}):(i.value=e||"",await b(e)))},{immediate:!0}),(e,t)=>((0,s.uX)(),(0,s.CE)("div",Zt,[u.value?((0,s.uX)(),(0,s.CE)("div",Jt," 正在加载单曲列表 ")):v.value?((0,s.uX)(),(0,s.CE)("div",Vt,(0,N.v_)(v.value),1)):l.value?((0,s.uX)(),(0,s.CE)("div",Ut,[i.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(dt,{key:0,"card-list":l.value,columns:6,gap:20},{default:(0,s.k6)(({cardData:e})=>[(0,s.bF)(yt,{"chart-info":e,onClick:t=>m(e[0]),class:(0,N.C4)({active:e[0]===i.value})},null,8,["chart-info","onClick","class"])]),_:1},8,["card-list"])),i.value?((0,s.uX)(),(0,s.CE)("div",Qt,[d.value?((0,s.uX)(),(0,s.CE)("div",Yt," 正在加载单曲信息 ")):p.value?((0,s.uX)(),(0,s.CE)("div",ea,(0,N.v_)(p.value),1)):Object.keys(o.value).length?((0,s.uX)(),(0,s.CE)("div",ta,[(0,s.bF)(Ft,{dict:o.value},null,8,["dict"])])):((0,s.uX)(),(0,s.CE)("div",aa," 暂无该单曲信息 "))])):(0,s.Q3)("",!0)])):((0,s.uX)(),(0,s.CE)("div",la," 暂无单曲列表 "))]))}},ra=(0,b.A)(sa,[["__scopeId","data-v-3a86b0b0"]]),na=ra,ca=[{path:"/",component:h,children:[{path:"",name:"start",component:E},{path:"table",name:"tableMain",component:A},{path:"table",children:[{path:"level",name:"tableLevel",component:Q},{path:"b30",name:"tableB30",component:Le},{path:"bpm",name:"tableBPM",component:qe},{path:"info",name:"tableInfo",component:ct}]},{path:"single/:songName?",name:"singleMain",component:na,props:!0}]},{path:"/:pathMatch(.*)*",redirect:{name:"start"}}],oa=(0,n.aE)({history:(0,n.Bt)(),routes:ca,scrollBehavior(){return{top:0}}}),ia=oa;(0,l.Ef)(i).use(ia).mount("#app")}},t={};function a(l){var s=t[l];if(void 0!==s)return s.exports;var r=t[l]={exports:{}};return e[l](r,r.exports,a),r.exports}a.m=e,(()=>{var e=[];a.O=(t,l,s,r)=>{if(!l){var n=1/0;for(u=0;u<e.length;u++){for(var[l,s,r]=e[u],c=!0,o=0;o<l.length;o++)(!1&r||n>=r)&&Object.keys(a.O).every(e=>a.O[e](l[o]))?l.splice(o--,1):(c=!1,r<n&&(n=r));if(c){e.splice(u--,1);var i=s();void 0!==i&&(t=i)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[l,s,r]}})(),(()=>{a.d=(e,t)=>{for(var l in t)a.o(t,l)&&!a.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}})(),(()=>{a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{a.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{var e={524:0};a.O.j=t=>0===e[t];var t=(t,l)=>{var s,r,[n,c,o]=l,i=0;if(n.some(t=>0!==e[t])){for(s in c)a.o(c,s)&&(a.m[s]=c[s]);if(o)var u=o(a)}for(t&&t(l);i<n.length;i++)r=n[i],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(u)},l=self["webpackChunkpcs"]=self["webpackChunkpcs"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))})();var l=a.O(void 0,[504],()=>a(497));l=a.O(l)})();
//# sourceMappingURL=app.e3f7dee3.js.map